<!DOCTYPE html>
<html>
	<head>
		<title>MidiPlayerJS - JavaScript Midi Player</title>
	</head>
	<body>
		<h1>MidiPlayerJS</h1>
		<h4>Choose a Midi File</h4>
		<p>
			<input type="file" onchange="loadFile()">
		</p>
		<p>
			<button onclick="Player.play()">Play</button>
		</p>
		<script type="text/javascript" src="browser/index.min.js"></script>
		<script type="text/javascript">
			var MidiPlayer = require('MidiPlayer');
			var Player = new MidiPlayer.Player(function(event) {
				console.log(event);
			});

			function loadFile() {
				var file    = document.querySelector('input[type=file]').files[0];
				var reader  = new FileReader();

				reader.addEventListener("load", function () {
					Player.loadArrayBuffer(reader.result);
				}, false);

				if (file) {
					reader.readAsArrayBuffer(file);
				}
			}
		</script>
	</body>
</html>